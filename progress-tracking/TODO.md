# TODO

## Current

- PROJECT: move entities/entityGroups instead of destroying/creating new ones in build mode
- EntityGroup should have "offsetCoordinates" field
- Entity absoluteCellCoordinates should take parent offsetCoordinates into account
- FoundationValidator ValidateIsOnGroundFloorOrAboveAnotherFoundation

## After

- CLEANUP: CellCoordinates Add/Subtract api.
- CLEANUP: You should be able to pass a list of validation errors straight into Notifications.State.Add instead of mapping them all to a string
- Use entity.definition.skinKey to decide which meshasset to use, not entity.definition.key
- blueprint entities should be centered to the middle of the entity instead of the bottom left - it feels like of awkward as it is
- Group in GameWorld\_\_ scripts with prefabs/models, possibly even definitions as well?
- BUG: two windows still get created
- BUG: entity group buttons are visible at first when you open the build tool and are in entity mode
- right click dropdown
- Entity.CalculateCellsFromSelectionBox should use the starting cell instead of just the highest/furthest left
- Foundation not built inside an already existing room should create one
- buildings & vehicles should have different validation sets
- Rooms should get added to buildings or vehicles
- When starting out there should be a "blueprint building" that entities/entity groups get added to.
- Tooltips
  - UI
  - game elements
- experiment with overlays
  - connected to/disconnected from transport
- experiment with light culling
  - different room types
- PROJECT: Save system
  - save file versioning
  - migrations between save file versions - add stuff to the json to make it serialize correctly with current codebase
- reimplement destroy tool to work with entities/entitygroups
  - different "destroy" types - entity, room, building, etc
- Option to turn day/night off and just have a single color for ground/background
- Interior lights features
  - brightness
  - color
  - etc
- Limit the number of buildings/vehicles somehow
  - arbitrarily?
  - with money?
- Resident+resident interaction
  - shopkeepers could eventually use this
- Convoy - EntityGroup of vehicles
- Rename "floors" to "platforms" to prevent confusion?
  - Or rename "floors" to "story"?
- Floors/platforms should probably be taller
- Add constants for floor height, wall width, etc
  - not floor height like the height of a building floor, the floor that you stand on
  - add "FLOOR_HEIGHT" constant (2 or 3 probably) and use that for floors instead
- CLEANUP: Why do I need to prefix "Tools.State.Key" with "ApplicationState"? namespace issues.
- "Empty floor" entity, for when a room has been deleted?
- Verify that all specified assets actually exist
- Remove journeys for now and focus on building?
- Entity type categories
- use "min size" instead of staticBlockSize, which is confusing
  - block size can be smaller than min size, eg. escalators/stairs
  - maybe alternatively "border" size could be defined, and "fill" size? for escalator border would be 1 (x2, so 2x2 at minimum) and then 1 on the inside
- Different vehicle/building types
  - stationary
  - vehicle
  - maybe I should rename vehicle back to Building for this
- 3 cells = 1 room cell? 5?
- built in way of entities to add modifiers to related entities,
  - to avoid all the boilerplate of adding/removing modifiers in setup/teardown
  - to allow entities without behaviors to add modifiers to other entities
  - "AttributeModifierCreators"?
- GameWorld attributes + behavior components
- maybe residents could be 1 1/2 tiles tall - they could fit comfortably in 2 but have to crouch for 1 (bedrooms, cockpits etc could be that small)
- Change standard room cell size
  - 1x5? 1x8? tall and skinny
- Bring back selectionbox resetting on mouse up
- entity layers (determines the z-index the entity is rendered at)
  - entities should default to the a constant value for that type of entity, and have the ability to be customized on a per definition/entity basis (e.g transportation items go in the front, except for ladders that connect two rooms should go inside)
- Z-index constants
- Add a "replace room" function - removing/adding rooms when you expand them causes some issues
- Rimworld-style "color picker" style button to go to build tool mode with that entity type selected
- Residents should decide when it is time to change what they're doing
  - Goal priority (if the next goal in the list is higher priority than the current one)
  - Schedule (e.g if it is time to go to sleep)
- 'tileability strategy' or something - I can foresee needing 2 different types of tileability:
  - corners or 'caps' (left hand side or right hand side) of a fixed size, with 'middle' sections of a variable size (e.g what I'm currently doing for rooms etc)
  - orthogonal, diagonal, or both
  - just repeat the block template over and over again to fill up the selection box (e.g 2x2, 1x2) (e.g large wheels)
- Exterior walls that form around outer perimeter of rooms
- World position will need to be tracked too, for buildings/residents to scroll by as the vehicle passes
- Handle (or disallow) a furniture being removed when a resident is using it
- Validate that either transportation entranae or exit is inside (or both)
- Different types of transportation items should be able to occupy the same cell (escalators + doorways etc)
- Finish up current iteration of route finder algorithm
  - Make sure each cell between current + target cells have enough vertical clearance
- For a first draft, every 1 mile of journey a random passer-by shows up
  - after that, encounters with other vehicles
- Freight areas look different to home areas etc so you can tell the difference at a glance
- Turret entity
- Rename "LightsManager" to "AtmosphereManager"
- Room lights that turn off + window blinds/curtains that shut when the resident goes to sleep
  - Only if there isn't another resident in the room at the same time
- AttributesStateSlice OnTick should only fire update event if the value is different than before
- Other entities should be added to vehicle as well (not just room)
- different furniture interaction types? using, repairing, cleaning, etc
- Make "make resident go here and do this" button be right click, not ctrl+left click
- Way of deleting types of entities other than rooms
  - inspect panel should also allow each one to be deleted
- New tool for merging/splitting up rooms
- Procedurally generated background that scrolls by
- holding down shift - select multiple entities
  - some UI element that says how many entities are selected (and what types)
- I don't think these static Create() functions on GameWorldRoom etc are used anymore
- Freight contents
- show/hide different entity layers/types
- UI elements to manage/interact with different entity layers/types
  - e.g lights: "turn all/selected lights off/on" toggle and "set all/selected light colors" button
- Reconsider whether entity key types (e.g Room.Key) are worth it in their current state
  - they could be stored as a string on the entitites themselves but remain as an enum to help with the unity editor
  - i.e in the code using an enum doesn't help much, but it does help in making sure you're connecting to the right thing in assetList
- pull Wheel.skinKey up into Entity/EntityDefinition
- maybe walls + ceiling should be the same entity as it is now
- Route parameters - routes
  - This would enable freight to require a large enough door for the freight to fit into
  - Also potentially allow for residents of different sizes
- Doors of different heights
- ability to save/load different chunks of the game world to a file
  - day time atmosphere effects
  - vehicles
- CLEANUP: a hard-to-follow series of entity add/deletes happens after builtToolState.EndBuild happens - the entity is built and then the selection box in UI/state is reset and buildToolState calls ResetBlueprintEntity and removes/adds a new entity. Ideally this only happens as many times as it needs to, there's some redundancy it seems like.
- chassis that can expand vertically really high without needing support but can't support anything above it
  - tent, for freight
  - spectrum between this (can only expand 1 high) and be able to have lots of weight
  - also cheap/vs expensive (tent = cheap)
- Validate entity is not overlapping another entity in the same cell(s)
  - also cells in the same "overlapGroup" or whatever (freight and furntiure);
- 'unconstrained' vs 'constrained' selection box - tile/based vs mouse position coordinates
- Build ToolStateButtons dynamically from available states
- "CursorManager" parent class to manage whether selection box is shown vs regular cursor, etc
- I should probably switch back to the raycast method of determining which entities are being moused over
- Decouple entity keys with the mesh they use - use "skinKey" like roomcell
- Clean up final gross entity type switch statements
  - FindDefinitionByKeyLabel
  - Entity.CreateFromDefinition
  - Entity.GetEntityDefinitionLabel
- Delete Scratchboard transform
- Stairs transportation item
- Transportation item capacity - residents queue up when it's at capacity
- Clean up UI padding/spacing, right now it's pretty inconsistent
  - Panel should be a prefab
- Make cells 1x1.5 or 1x2 as in my sketchbook - floors/ceilings/walls are part of the Inside of box
- TransportationItemDefinition/entranceExitBuilder should probably return 2 lists (1 for entrances and 2 for exits) instead of entrance/exit tuples of single coordinates
- BuildValidators/DestroyValidators?
- EntityStateSlice build should fire onItemsBuilt event as well - currently it's just singular
- same as with how I made an entities appState slice:
  - Validators appState slice group
- in build mode somewhere in the UI it should give you a list of all the validation rules about the current selected entity
- Furniture usage slots
- Break room entity down into:
  - Back walls entity
  - Side wall entity
  - Room would be a "group", making a room would be making a floor, back walls, etc simultaneously
- "Cell" class that encompasses coordinates, orientation?
- perhaps game should pause in build/destroy modes; can't switch back to play mode until everything is valid
- room templates should be a collection of furnitures, transportation items, etc.
  - possibly the user should be able to define room templates?
- MaterialReplacer:
  - should be able to replace arbirary materials with another
  - maybe should create a lookup table indexed by material name or something to avoid traversing gameObject tree too much?
- spiral staircase transportation
- Make rooms a collection of walls/back walls/windows/floors/lights. Some floors are 1 tile? floors vs platforms (like in teraria)
- "front door" transportation items - connection to the outside world
- Ability for residents to walk around on the ground
- When new resident slots open up (beds built) residents should arrive via ground, not just appear
- Stronger chassis should be able to have longer overhangs
- SelectionBox should span the default size of transportation items instead of just the current cell
- Pull out a lot of the logic in these static Create() method
- UI element that displays current resident's goals
- "TickTimer" utility class
- new Route normalization algorithm should treat "UsingTransportationItem" segments differently
  - just go straight to the other side for now
  - maybe in the future some transportation items can be faster or slower than others
- bits of roomcell walls that light up when the room is highlighted
  - same thing with other entities
- Placeholder models for furniture items
- Animations when residents are traveling
  - Custom animations for when residents use specific furniture/transportation items
- Move a lot of the attributes in VehicleAttributesGroup into vehcile and rename VehcileAttributesGroup VehcileBehavior
- Resident goal priorities
- Resident -> ResidentAttributesGroup -> ResidentBehaviors? or Resident -> ResidentBehaviors?
  - also for Furniture, Room, and Building
- Freight of different sizes - small, medium, large
  - small go on shelves
  - medium can stack on top of each other
  - large take up a whole cell?
  - larger = more $ obvs but more space/investment
- Different room "chassis" - tradeoff between structural integrety and light
  - more light = good for plants
  - more structural integrity = can build larger vehicles (good for freight? passengers?)
- Engines should yield less power as their condition goes down
- If a vehicle doesn't have any engines it shouldn't be able to move
- Make sure furniture isn't being used when a resident starts walking over there to use it
- I think validators will need to be state slices near trhe bottom of the tree now. Validators need to have access to a lot more than just the thing they're validating
  - same with Tempaltes/Definitions - they might need to be in their own namespace
- 'current selected vehicle' in UI state
- More cells - heavier; wheels can only manage a certain amount of weight (better wheels = can handle more weight)
- Modular way of applying materials to specific meshes
- Things you can do/specialize in with your vehicle:
  - be a bus (have passengers)
  - be an overnight bus (hotel rooms)
  - deliver things (freight room)
  - make food for your residents (farms)
- Camera that bypasses fog for build/destroy/inspection modes
- helpers for finding a cell off of the side of the left or right side of the screen, for spawning new residents, npc vehicles etc
- TransportationItem selectable entity
- Move entities when placing them instead of continually adding/removing them
- Template button should be visible when selecting a new entity type - right now it's just the category button
- Move RoomConnections into its own state slice
- maybe UI should be a sibling namespace to GameWorld instead of child
- Furniture should validate that there's not other furniture at the same coordinates
  - same with transportation items
- TransportationItem/Furniture that takes up multiple cells
- Fix the mesh scaling (everything is either 0.1 or 10 or 100 not 1)
- Some kind of way of making BedCreationWatcher not immediately add new residents - perhaps on a interval longer than every tick
- Moonlight
- destroy validation (cannot delete room with another room above it)
- tank treads wheels type
- furniture that occupys different # of tiles
- dynamically rendered "Outer walls" of vehicle
- furniture that requires floor/does not require floor
- tick animations
  - eg resident going from one cell to the other
  - this probably means reorganizing things to calculate the next tick every tick (for the animation to know where to lerp from/to)
- Make residents 2 tiles tall 1 tile wide
- Vehicle/building connections
- Debug resident path/goal gameworld display things
- furniture interaction slots
  - direction (left, center, right)
- furniture z indexes - in front, behind
- Reconsider how routes are constructed - maybe every segment should be 1 cell?
- Convert other List wrappers to use the new ListWrapper generic
- "reset" button to reset state to default
- ability to start game with a non-empty state already - load rooms, connections, residents, current time, etc
- RouteFinder shouldn't look for every room entrance in the room, just on the current floor - it should also look for furniture on the current floor that could transport the resident elsewhere
- Furniture "usage slots" - an array of residents currently using this piece of furniture the size of the furnitures occupancy
- Residents currently stay on the same cell for more than one cycle currently - because of repeating cellCoordinates in segment end/start
- Wallet transation history
  - Wallet "batch" transactions so the transactions don't get flooded with lots of tiny transactions (e.g. desk income)
    - transactions will get added to queue, grouped by string id/message, then OnTick() they get applied
- Room furniture
  - beds
  - desks
  - stairs??
  - elevator cars???
    - potentially furniture could replace "room modules"
      - rooms would just be generic rooms, and furniture would dictate the behavior/functionality
- "Schedules" store, possibly right below timestore? residents will have schedules, but potentially weather effects and other such things could use this schedule mechanic
- Route weighting mechanism to figure out which route is the best to take
  - probably as simple as fewer cells traveled > more cells traveled
- Keybindings for build, destroy, inspect, none
- 'closed' connections, e.g between 2 private rooms (e.g condo)
- Stairwells should not be able to be placed next to elevators or other stairwells
  - Perhaps this should be part of "Transportation category validation"
- Resizing rooms should also reset their entrances (e.g if an elevator had a connection but has been resized)
- Stop destroying/recreating roomCells whenever the cursor changes position - only when it needs resizing
- destroy validation
- rooms should not be able to be built in thin air above ground floor
- "Path" constants for paths used in Resource.Load - refactoring/moving things around would be easier
  if they're all in one place
- should the destroy tool replace the room with an empty floor, at least on floors 0 and above? otherwise, certain rooms would be undestroyable?
- Make ResidentBehavior.Goals a bit higher level - e.g instead of Dequeue() maybe Complete()

## Bugs

- BUG: Clicking into build state -> selecting an entity definition other than the default -> switching to a different tool -> switching back to build state => the default definition is shown as selected in the UI again even though the other definition is selected in the appState.
- BUG: Adding new engines too quickly causes the new attributes not to get registered correctly?
  - why aren't things getting registered until the next tick? Is it just the UI?
- BUG: expanding a room with furnitures inside of it crashes the game
- BUG: Vehicle stops when you add to a room
- BUG: 'lock' route progress to stop those out of bounds errors from happening when a resident is in the process of traveling
- BUG: Increasing the size of a room into a different room has weird results - they sort of combine but then there's a phantom room
- BUG: I'm already running into performance issues when making large rooms
  - BUG: investigate the number of nested objects inside of each roomcell mesh
  - BUG: also investigate how every roomcell/entity gets removed/created instead of moved
- BUG: Sometimes when sending a resident back and forth between cells there's an out of bounds exception with RouteProgress
- BUG: Entity doesn't update when an entity is built
- BUG: Individual cells should know if they are valid again (right now it's just the room)
- BUG: Fix that NullReferenceArea in MapManager that shows up when defocusing/refocusing on the window again
- BUG: RoomEntrances in the blueprint room aren't getting highlighted
- BUG: Input.GetMouseButtonDown(0) does not work consistently on macos
- BUG: UI is way too big on my laptop

## Furniture ideas

- Television (recreation) (uses power)
- Fridge (food)
- bunkbed
- Scrap workbench (for breaking down junk)

## Projects

- Store system
- Kitchen/restaurant room
- Top-level "KeyBindingsManager" that listens for user input + dispatches actions
- UI overlays
- Dynamic weather
- save/load

## Cleanup

- CLEANUP: Some kind of namespace to put all of the other stuff at the top of AppState - time, wallet, journey, etc.
- CLEANUP: "Derived" attributes? the way I'm setting current speed dynamically feels kind of messy
- CLEANUP: Switch the order of ListType and ItemType in ListItemStateSlice generic (ItemType should be first)
- CLEANUP: RouteFinder creates too many branches
- CLEANUP: RoomCells -> RoomCellList OR RoomList -> Rooms
- CLEANUP: FloorPlane is confusingly named - it is actually just the collider that watches for the current mouse position, not the floor
- CLEANUP: ListWrapper should implememnt IEnumerable
- CLEANUP: A "UI settings" object I can tweak a bunch of stuff in the unity editor with, instead of public serializable fields on each script?
- CLEANUP: Awkward naming conflict between ToolState + tool sub states

# Done

- BUG: blueprint entity still doesn't resize properly
- EntityManager classes (FurnitureManager etc) should derive from a base class
- replace "Public Interface" annotations with "public interface" (since API is obvs the wrong word for that)
- Extend the logic on line 41/42 in GameWorldFoundation to the rest of the GameWorld entities. Definitions should be able to be basically be null and still render a entity
- Pull resident.SetResidentPosition out into Entity as a starting point for moving entities instead of just destroying/creating new ones
- Replace "\_\_Manager" assetList field with just a single "prefabAsset" field. assetList/meshList is confusing.
- Room should just be a collection of walls/floor, in a similar way relationship to vehicles -> rooms
- Entity group validation
- "EntityGroup"s - a wrapper around a list (group) of entities without its own cellCoordinatesList
  - used for a things like room, vehicle
  - the cost of the group would be the sum of all of the entities prices
  - basic version could work like a stamp - could be called "static"
  - the next iteration would be resizable - each entity type could have their own resiability definition/strategy
- Add "baseCoordinates" & "offsetCoordinates" to entity - "absoluteCoordinate" = sum of both of these
- Windows entity - new state slice/entity type
- Add "building" EntityGroups
- Rename CellCoordinates.floor to y
- entity/entitygroups should keep a reference to their parent
- when placing a room windows are not valid (red) but room can still be placed
- 'entity' and 'entity group' buildToolState subStates
- EntityGroup buttons are visible from the start
- Entity categories
  - Basic
    - structure
    - furniture
    - cargo?
    - living beings
  - for different vehicle types
    - building
    - vehicle
- proper room 'templates' prepopulated with furniture
  - bedroom
  - cockpit
- Adding windows to a room should hide that portion of the foundation
- use depth masking to hide wall where window is
- Remove all of those Events/Queries subclasses. They cause more trouble than they're worth
- Convert room to an entity group
  - walls/ceiling (figure out a name for this)
  - floor
- Reorganize definitions
  - Remove "Keys" from entities
  - they don't need to be part of Registry
- Refactor entity.CalculateCellsFromSelectionBox to allow for different "fill mode" - marquee, pencil
- Maybe this would make more sense:
  - "Room foundation" = box that makes up a room
  - "Platform" for floating floor
  - You can't have interior walls, ceiling, back walls, or windows outside of a room
- implement CalculateDerivedAttributes for vehicle attributes (calculate currentSpeed in there)
- Ability for furniture behavior interaction to fail for some reason - validation?
  - use first for pilot seat -> without any engines then it will not work
- If a furnitureBehavior becomes invalid in OnInteractTick the resident doesn't register that it needs to change state
- same as with how I made an entities appState slice:
  - Relations appState slice group
- I should probably replace Entity.Type with typof(Entity) because they're used in the same way
- Connections to outside
  - RouteSegmentNode subtype for outside connections
  - RoomConnection subtype for outside connections
  - Wheels room should allow ladder furniture
  - Residents should be able to walk on the ground and climb up the wheels ladder
- cellCoordinates.bottom row function - use in room cell overhang validator
- Get rid of the remnants of all the ListWrapper<T> subtypes
  - ListStateType
  - AttibuteStateType
- Wheels aren't highlighting with the destroy tool
- same as with how I made an entities appState slice:
  - Attributes appState slice group
  - Behaviors appState slice group
- Bring back destroy tool highlighting
- Improved lighting
  - room lights that come on at night
- light entity
- game world resident movement is broken rn
- Make vehicles an entity again - I want to be able to place vehicles + have vehicle definitions
- Switch UI/State.SetEntityList to use a list of entities from Entities/State
- Destroying room blocks seems to be broken again
- Room datatypes/state is structured in a different way to some of the newer classes (e.g make it Room.SkinKey instead of RoomSkinKey)
- Maybe Floor should have a Room room field to simplify things
- starting a room selection inside another room should expand that room
- Transportation room furniture interface - have a "connects to"
  - Room entrances could be "Doorway" furniture instead
- "Journey" datatype - driving vehicle gets you closer to your destination
- Draggable/resizable transportation items
- Rooms aren't validating that they're on top of another room again
- GameWorldEntityList
- replace ValidateWheelsAreOnCorrectFloor with generic validator
- don't default to weird "none" room type
- "floors" - not all room cells should have floors by default
- system for items that can connect horizontally/vertically
  - a way of organizing/naming nodes in the mesh tree to do this automatically without configuration
- wheels should be their own entity instead of a room now
- Entities are staying "valid blueprint blue" after being built
- Beef up validations for different entity types
- Wheels should not have vertical flexibility
- get rid of Room.Skin + config for now (wheels entity renders it obsolete)
- GameWorldEntity
- GameWorldEntityList that manages:
  - setting colors responding to inspect/build/destroy state
  - Adding/destroying entity types when they are added/removed from the store
- Clean up final gross entity type switch statements
  - Entity.CreateFromDefinition
- Rooms are highlighted as "invalid" when they are multiple cells high, even though they are allowed to be built
- Floors should be taken into account in route finding
- Clicking "none" in the build tool state buttons crashes the game
- Add two way transportation items back in (right now doorways are one way)
- Bring back "is on top of another room" room validation
- Replace ground cells with a simpler ground for now
- Convert TILE_SIZE to a Vector2
- Rooms shouldn't be able to be x number of cells wider than wheel base
- Create "IEntity" interface to abstract some of this OnBuild/OnDestroy stuff
  - Same for things that are Setup/Teardown-able?
- reorganize/simplify buildtool state to be more dynamic
- Freight Entity
- Maybe entity needs to have a couple more generic parameters, like TemplateType and ValidatorType
- Rename "MeshWrapper" to "EntityMeshWrapper"
- GameWorldEntity
- change EntityDefinition.cellCoordinatesList to something else, it's easy to confuse with entity.cellCoordinatesList
- Destroy tool seems to be broken
- BuildToolState/BuildStateButtonsManager are a big mess with all these switch statements now
- abstract room validators up into EntityValidators
- ssame with room definitions/queries
- Maybe instead of roomCells room could use the entity cellCoordinatesList
- Definitions/Queries could probably be pulled out into a "EntityTemplateListQueries" class
- "Entities state slice"? is that getting too deep into inheritence
- Fix transportationitem tiling
- Rename "templates" to "definitions" & remove a lot of 'constant' fields from entity, like title, category, etc. A reference to its definition is good enough
- escalators should be able to be 3 tiles high/wide - right now it's just increments of 2
- transportation items should support multiple sets of entrances/exits
- TransportationItem meshes are broken again
- Tileable.cs probably has classes in there that need to be broken out
- auto generate entity buttons
- Fix room cell tiling
- abstract room/furniture validators -> entity validators
- Move the rest of the entities states (resident, transportationitems etc) into the entities state
- MaterialReplacer:
  - should be static
- Remove most of the current room templates - right now there should just be a single room type (empty)
- "Material replacer" that uses a lookup map to replace materials in fbx files with unity materials of the same name
- All state slices should add lists of items instead of singular - e.g AddRooms instead of AddRoom
- Figure out why 2 game world transportation items (1 cell for each cell in a transportation so 4 in total) are being created instead of 1
- "List" state slice
- Reorganize models/prefabs to create less of a delineation between the 2
- Sun quickly resets to beginning position at the start of every day
- Integrate tileable into TransportationItem
- Reorganize prefabs to be embedded in other prefabs/managers and get rid of the reliance on the Resources/ folder
- Remove residentmotor state
- Improved lighting
  - global sun light that rotates/changes color as the day progresses
- Use Invoke? syntax for delegates everywhere in state
- Resident "energy" attribute
  - Replenished by sleeping in a bed
- Delete map cell helpers
- TransportationItem meshes
- Make transportation item meshes show on every cell that they occupy.
- show a notification or something if no route is found for a residnet
- Animate resident traveling
- replace room entrances with TransportationItems
  - Remove room entrances
- Maybe get rid of the 3 different resident behavior state handlers - I'm not sure there are going to be more than 3 and they complicate interaction with the appstate
- turn this into a car game
- "watchers" that sit at the bottom of appstate and don't hold any state but react to/mutate other parts of appState?
  - e.g residents moving in watcher
- "VehicleAttributes" or "VehicleStats" - a slice lower down in the state tree to capture things like fuel level, total cells, current speed etc
- building "stats" or "attributes" - fuel, power level, current speed, etc.
  - uses queries from furniture/furniturebheviors/residents/residentbehaviors
- Replace AssetManager with putting more unity-centric AssetList field on prefabs
- Work through the room/furniture 'isInBlueprintMode' issue. They're not in sync right now
- "TransportationItem" + entities - escalators, stairs
  - I think I've determined these are functionally different from furniture enough that they are a whole different thing.
- function to calculate normalized progress between 2 times of day
- Furniture validation
- Resident validation
- Standardize around "Initialize/Deinitialize" or "Setup/Teardown"
- Resident furniture behaviors
  - furniture "controls" resident while they're using it
- consider putting vehicles state further down in the heirarchy - having vehicles be able to query their contents in various ways
  (e.g how many residents are currently inside of it, or whether it has a cockpit/engine) would be helpful
- Delete room entrances when a block gets deleted as well
- Ability to destroy a single block in a flexible room
- Move Rooms dictionary in Rooms state somewhere else & make it more extensible
- blueprint price indicator for flexible rooms
- Add GameWorldRoomList
- You should be able to delete a single block of a flexible-sized room
- Add residents
- namespace reorganization
  - Split "type definitions (Room, Route, Resident etc) into "Data" namespace
  - Rename "Stores" to "GameState" or something
- When casting the mouse ray, build a stack of interactable/inspectable elements
  - If that stack contains a ui element:
    - on mouse down don't propagate
    - on mouse up, still propagate but handle it further up the chain
  - Eventually this will allow for multiple clicks in the same location cycling through this list
- Add concept of different "vehicles" or separate entities - groups of rooms. When you add/delete a room it can either add to an existing vehicle or create a new one
- Blueprint should just be a room in RoomState - right now it lives in a seperate place in BuildToolState;
- Draggable destroy tool
- Move current RoomDefinitions constants to a field in Registry - with ability to split up the "registering room template" logic into different files
- Moving camera around with middle mouse button
- Camera zoom in/out
- Room addition is broken again
- Generate rooms buttons in RoomBlueprintButtonsManager dynamically
  - Room types in BuildToolPanel should be grouped by RoomCategory
- Flexible-sized rooms should remember the 'blocks' they are made up of, to avoid having to recalculate it when you destroy individual blocks.
- Blueprint validators should probably take in the entire Store object
- Rename RoomDetails to RoomTemplate
- Use factories for RoomValidator and RoomEntranceBuilder, right now all rooms of the same type share the same instance
- GetRoomPrice should live on Room, not Blueprint
- Debug resident walk along route to destination
- Perhaps Stores.Map.Rooms should just be Stores.Rooms and delete Stores.Map
  - Also rename "MapUI" to just "UI"
- RoomEntrances namespace?
- Make ground a cube, cut holes in it when you build a room
- RoomCellValidators that follow the same pattern as EntranceBuilders instead of what I have now
- resident pathfinding
- For debug purposes - draw line between cells, along route
- transport/rooms connected to transport system
- "RoomCellPosition" is confusing - change to "RoomCellOrientation"
- Having RoomUse, RoomCategory AND RoomModules seems like too much?
- Rename 'useDetails' to 'moduleDetails'
- for when I implement elevators: Elevator cars can go only from the top to the bottom - no stopping at inbetween places.
  - This helps rationalize having to build all those hallways and stairs
  - Perhaps "upgrades" that can make them stop at 1 other floor per upgrade?
- things are feeling kind of messy because roomCells are having to know way too much about their room - I should make things more unidirectional
- Removing rooms should also delete their room connections
- Add blueprint room connections to main room connections list in MapStore when the room gets built
- Elevator entrances should only be at the top and bottom - maybe get ElevatorModule to do this?
  - Similar thing with hallways and lobbies
- Mesh for rooms with left, middle, right etc. segment tiles
- Combining rooms seems to delete them right now
- GameWorldBlueprintCell should wrap GameWorldRoomCell just like blueprintCell -> roomCell does
- Room "Modules", to attach to rooms and give them behaviors. Like unity components
- Rename MapCursor/MapCursorCells to RoomBlueprintCursor/RoomBlueprintCursorCells
- Flexible-sized rooms should cost more per tile - right now they're still a flat cost liek Inflexible rooms
- Map/toolStateHandlers + UI/subState/ keeps confusing me
- Placing a tile next to another flexible room should add onto it instead of creating a new room. i.e for elevators/lobbies
- Flexible-sized rooms currently only work in increments of 1x1: make them work in increments of any rectangular room shape.
  - e.g I want to make a wide elevator that takes up 2 horizontal cells
- CellCoordinates validation stuff should go somewhere other than inside of RoomBlueprintCell
- RoomCell class (wrapps cellCoordinates)
- Inspect ToolState mode
- Buttons that show active state
- Destroy ToolState mode
- Add click-and-drag room vehicle
- Add flexble-sized rooms
- Remove 'RoomStore' - having just MapStore should be fine
  - Combine RoomTemplate and RoomTemplate
- Room-specific validations
  - Lobby should be allowed on certain floors only
  - Elevators should not be allowed within a certain distance to each other
